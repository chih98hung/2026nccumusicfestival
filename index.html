<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>風塵卜卜</title>
    <style>
        /* CSS 樣式：設定全屏背景圖和按鈕位置 */
        body {
            margin: 0;
            padding: 0;
            background-color: #0d1226; 
            font-family: sans-serif;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
        }
        .quiz-container {
            width: 100%;
            max-width: 480px; /* 模擬手機或單頁App的寬度 */
            position: relative;
        }
        /* 圖片格式已修正為 PNG */
        #quiz-image {
            width: 100%;
            display: block;
        }

        /* 按鈕容器：位於圖片上方的絕對定位層 */
        #button-area {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 10;
        }

        /* 通用按鈕樣式 - 完全隱形 */
        .option-button {
            position: absolute;
            background-color: transparent; /* 完全透明 */
            border: none;
            cursor: pointer;
            z-index: 20; 
            
            /* --- 徹底隱藏文字的關鍵 CSS --- */
            color: transparent !important; 
            font-size: 0 !important;       
            line-height: 0 !important;     
            text-indent: -9999px;          
            overflow: hidden; 
        }
        
        /* 頁面特定按鈕的定位 */
        
        /* 封面/導言/確認結果頁的單一按鈕 */
        .start-button {
            width: 80%; 
            left: 10%;
            top: 75%; 
            height: 7%;
        }

        /* 題目頁（q1-q6）的四個選項按鈕 */
        .q-btn-a { top: 48.5%; left: 10%; width: 80%; height: 8%; }
        .q-btn-b { top: 59%; left: 10%; width: 80%; height: 8%; }
        .q-btn-c { top: 69.5%; left: 10%; width: 80%; height: 8%; }
        .q-btn-d { top: 80%; left: 10%; width: 80%; height: 8%; }

        /* 結果頁的三個按鈕 */
        .result-btn-share {
            top: 90%; 
            left: 10%; 
            width: 25%;
            height: 7%;
        }
        .result-btn-replay {
            top: 90%; 
            left: 37.5%; 
            width: 25%;
            height: 7%;
        }
        .result-btn-signup {
            top: 90%; 
            left: 65%; 
            width: 25%;
            height: 7%;
        }
    </style>
</head>
<body>

<div class="quiz-container">
    <img id="quiz-image" src="cover.png" alt="測驗封面">
    
    <div id="button-area">
        </div>
</div>

<script>
    // --- 測驗資料定義 ---
    
    // 講座連結 (林易穎已改為林易祺，連結不變)
    const LECTURE_URLS = {
        '捏捏': 'https://forms.gle/PvwhsYqJ7uAAqcrQ8',     
        '劉又熊': 'https://forms.gle/4C3PAuXNZKUm4CN98',   
        '林易祺': 'https://forms.gle/5SHN6fTp3p6397vs8'    // 修正講師名稱
    };

    // 所有測驗頁面和結果頁面的圖片 (副檔名已改為 PNG)
    const PAGE_IMAGES = [
        'cover.png',        // 0: 封面
        'intro.png',        // 1: 導言
        'q1.png',           // 2: Q1
        'q2.png',           // 3: Q2
        'q3.png',           // 4: Q3
        'q4.png',           // 5: Q4
        'q5.png',           // 6: Q5
        'q6.png',           // 7: Q6
        'gotoresult.png'    // 8: 確認結果
    ];
    
    // 結果圖片及其對應的講座 (副檔名已改為 PNG)
    const RESULT_DETAILS = {
        'R1': { file: 'result_star.png', lecture: '捏捏' },      
        'R2': { file: 'result_sun.png', lecture: '捏捏' },       
        'R3': { file: 'result_foggy.png', lecture: '劉又熊' },    
        'R4': { file: 'result_sunset.png', lecture: '劉又熊' },   
        'R5': { file: 'result_dawn.png', lecture: '林易祺' },     // 修正講師名稱
        'R6': { file: 'result_moon.png', lecture: '林易祺' }      // 修正講師名稱
    };

    // --- 全局變數 ---
    let currentPage = 0; 
    let userAnswers = []; 
    let finalResultKey = '';

    const quizImage = document.getElementById('quiz-image');
    const buttonArea = document.getElementById('button-area');

    // --- 程式碼優化：預先載入圖片 (副檔名已改為 PNG) ---
    function preloadImages() {
        // 從所有圖片列表中提取要預載入的清單
        const imagesToPreload = [
            'intro.png', 'gotoresult.png', 
            'q1.png', 'q2.png', 'q3.png', 'q4.
